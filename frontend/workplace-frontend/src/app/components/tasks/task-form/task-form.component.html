<div class="task-form-container">
  <h2>{{ isEditMode ? 'Editar Tarefa' : 'Criar Nova Tarefa' }}</h2>

  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="title">Título</label>
      <input id="title" type="text" formControlName="title" placeholder="Título da tarefa" />
      <small *ngIf="title?.touched && title?.hasError('required')" class="error">O título é obrigatório.</small>
      <small *ngIf="title?.hasError('maxlength')" class="error">Máximo de 250 caracteres.</small>
    </div>

    <div class="form-group">
      <label for="description">Descrição</label>
      <textarea id="description" formControlName="description" placeholder="Descrição (opcional)"></textarea>
      <small *ngIf="description?.hasError('maxlength')" class="error">Máximo de 2000 caracteres.</small>
    </div>

    <div class="form-group">
      <label for="status">Status</label>
      <select id="status" formControlName="status">
        <option value="Pending">Pendente</option>
        <option value="InProgress">Em andamento</option>
        <option value="Done">Concluída</option>
      </select>
    </div>

    <div class="actions">
      <button type="submit" [disabled]="loading || form.invalid">
        {{ isEditMode ? 'Salvar Alterações' : 'Criar Tarefa' }}
      </button>
      <button type="button" class="cancel" (click)="router.navigate(['/tasks'])">Cancelar</button>
    </div>

    <div *ngIf="error" class="error">{{ error }}</div>
  </form>

  <div *ngIf="loading" class="loading">Salvando...</div>
</div>
